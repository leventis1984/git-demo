<?xml version="1.0" encoding="UTF-8"?>
<!--
    Document: getPayerIdentity-2.0.xsd	
    Version:  2.0
    Copyright 2009 Earthport Plc. All rights reserved.
-->
<xsd:schema xmlns="http://customer.endpoint.earthport.com/api/merchant/v2/services/getPayerIdentity"
    targetNamespace="http://customer.endpoint.earthport.com/api/merchant/v2/services/getPayerIdentity"
    xmlns:epcore="http://customer.endpoint.earthport.com/api/merchant/v2/components/core"
    xmlns:epident="http://customer.endpoint.earthport.com/api/merchant/v2/components/identityBase"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified">
    
    <xsd:import namespace="http://customer.endpoint.earthport.com/api/merchant/v2/components/core" 
    	schemaLocation="../components/coreTypes-2.0.xsd" />
    
    <xsd:import namespace="http://customer.endpoint.earthport.com/api/merchant/v2/components/identityBase" 
    	schemaLocation="../components/identityBaseTypes-2.0.xsd" />
    	
    <xsd:annotation>
        <xsd:documentation>
            
				This service is used to list all of the details for the specified user's Payer Identity data.
			
				The message needs to contain the UserID of the account which wants to be retrieved.
				An optional element showHistory will return all the versions of the payerIdentity data associated with this user,
				otherwise the default behaviour will be to return the current Payer identity Data.
			
            
        </xsd:documentation>
    </xsd:annotation>
    
    <xsd:element name="getPayerIdentity" type="getPayerIdentityType" />
    
	
		
    <xsd:complexType name="getPayerIdentityType">
	
		<xsd:annotation>
			<xsd:documentation>
		
					The service can be used in two different ways:
			
					a) A "userID" is specified - this is used to retrieve the current payer identity associated with a given user. Also the history of identities previously assigned to the user may be retrieved if the 
					"showHistory" flag is set to true.
			
					b) a "payerIdentityID" is specified - this is used to retrieve the detail of a specific payer identity based on the unique identifier code.
			
					
					Input parameters which are required by the "getPayerIdentity" service:
				
					The "userID" - Mandatory - (Please refer to the "userIDType" element of the coreTypes.xsd file)
						The userID can either be an "epUserID" or a "merchantUserID" or both.
						At least one element must be provided.
						This is the user to which the bank account will be added.
						
						
					The "showHistory" - Optional
					If set to "true" this will include all the historical identity records (if any) associated to that user.
					The default value is "false".
					
						
					The "payerIdentityID" - Conditional (Please refer to the "PayerIdentityIDType" element in the identityType.xsd file).
					Used if you have the specific payerIdentityID for which additional information is to be retrieved.
	
			</xsd:documentation>
		</xsd:annotation>
	
		<xsd:sequence>
			 <xsd:choice>		
			 	<xsd:sequence>
					<xsd:element name="userID" type="epcore:UserIDType" minOccurs="1" maxOccurs="1"/>
					<xsd:element name="showHistory" type="xsd:boolean" minOccurs="0" maxOccurs="1"/>
				</xsd:sequence>
				<xsd:element name="payerIdentityID" type="epident:PayerIdentityIDType" />
			 </xsd:choice> 					
		</xsd:sequence>
		<xsd:attribute name="version" type="xsd:decimal" use="required" />
	</xsd:complexType>

	
	<xsd:element name="getPayerIdentityResponse" type="getPayerIdentityResponseType" />
	
	<xsd:complexType name="getPayerIdentityResponseType">
	
	<xsd:annotation>
		<xsd:documentation>

			Parameters which are returned by the "getPayerIdentity" service response:
	
				The "userID" - Mandatory - (Please refer to the "userIDType" element of the coreTypes.xsd file)
						The userID can either be an "epUserID" or a "merchantUserID" or both.
						At least one element must be provided.
						This is the user to which the bank account will be added.
				
				The "payerIdentity" - Optional - (Please refer to the "PayerIdentityResponseType" element in the identityType.xsl file).
						The PayerIdentity data may include address, birth data, identification and additional elements as appropriate depending 
						on if it is a legal entity or an individual's identity
							
		</xsd:documentation>
	</xsd:annotation>

    	<xsd:sequence minOccurs="1" maxOccurs="1">
			<xsd:element name="userID" type="epcore:UserIDType" minOccurs="1" maxOccurs="1" />
			<xsd:element name="payerIdentity" type="epident:PayerIdentityResponseType" minOccurs="0" maxOccurs="unbounded" />
    	</xsd:sequence>	
  	</xsd:complexType>
	
</xsd:schema>